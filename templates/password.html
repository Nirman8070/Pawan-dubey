<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Forgot password</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fahkwang"/>
</head>
<body>
  <div id="loginModal" class="modal" style="display:flex;">
    <span class="close" id="closeLogin" style="position:absolute;top:18px;right:28px;font-size:2rem;cursor:pointer;">&times;</span>
    <div class="modal-content" style="max-width:400px;margin:auto;position:relative;">
      <h2 class="heading">Change Password</h2>
      <form id="passwordForm" style="display:flex;flex-direction:column;gap:18px;">
        <!-- Step 1: Enter mobile number -->
        <input type="tel" id="mobile" name="mobile" placeholder="Enter Mobile Number" required style="padding:10px;border-radius:5px;border:1px solid #ccc;">
        <!-- Step 2: Send OTP Button -->
        <button type="button" id="sendOtpBtn" class="btn" style="width:100%;">Send OTP</button>
        <!-- Step 3: Enter OTP -->
        <input type="text" id="otp" name="otp" placeholder="Enter OTP" required style="padding:10px;border-radius:5px;border:1px solid #ccc;">
        <!-- Step 4: Validate OTP -->
        <button type="button" id="validateOtpBtn" class="btn" style="width:100%;">Validate OTP</button>
        <!-- Step 5 & 6: Enter new password and confirm password (hidden until OTP validated) -->
        <input type="password" id="newPassword" name="newPassword" placeholder="Enter New Password" required style="padding:10px;border-radius:5px;border:1px solid #ccc;display:none;">
        <input type="password" id="confirmPassword" name="confirmPassword" placeholder="Confirm New Password" required style="padding:10px;border-radius:5px;border:1px solid #ccc;display:none;">
        <!-- Step 7: Change password button (hidden until OTP validated) -->
        <button type="submit" id="changePasswordBtn" class="btn" style="width:100%;display:none;">Change Password</button>
      </form>
    </div>
  </div>
  <script>
    document.getElementById('closeLogin').onclick = function() {
      window.location.href = '{{ url_for("index") }}';
    };

    // Simulate sending OTP
    document.getElementById('sendOtpBtn').onclick = function() {
      const mobile = document.getElementById('mobile').value;
      if (mobile.length < 10) {
        alert("Please enter a valid mobile number.");
        return;
      }
      // Simulate sending OTP
      alert("OTP sent to " + mobile);
      document.getElementById('sendOtpBtn').disabled = true;
      document.getElementById('sendOtpBtn').innerText = "OTP Sent";
    };

    // Simulate OTP validation
    document.getElementById('validateOtpBtn').onclick = function() {
      // You can add real OTP validation logic here
      document.getElementById('newPassword').style.display = "block";
      document.getElementById('confirmPassword').style.display = "block";
      document.getElementById('changePasswordBtn').style.display = "block";
      document.getElementById('validateOtpBtn').disabled = true;
      document.getElementById('validateOtpBtn').innerText = "OTP Validated";
    };

    // Optional: Prevent form submission for demo
    document.getElementById('passwordForm').onsubmit = function(e) {
      e.preventDefault();
      // Add password change logic here
      alert("Password changed successfully!");
      window.location.href = '{{ url_for("login") }}';
    };
  </script>
</body>
</html>